# Modern, comfortable tmux.

# Set PREFIX to C-a.
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# Large per-pane history (scrollback).
set -g history-limit 200000

# Enable mouse:
# - Scroll wheel enters copy-mode and scrolls.
# - Click to select panes/windows.
# - Drag to resize panes.
set -g mouse on

# Quick mouse toggle: PREFIX + m.
bind m set -g mouse \; display "mouse: #{?mouse,on,off}"

# Use vi keys in copy-mode (hjkl, / search, etc.).
setw -g mode-keys vi

# Vi-like selection:
# - 'v' begin selection.
# - 'Y' copy + exit copy-mode.
# - 'r' toggle rectangle selection.
bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi Y send -X copy-selection-and-cancel
bind -T copy-mode-vi r send -X rectangle-toggle

# Integrate with system clipboard.
# Keep this ON (tmux will attempt clipboard integration when supported).
set -g set-clipboard on

# X11 + xclip (needs to be installed).
bind -T copy-mode-vi y     send -X copy-pipe-and-cancel "xclip -in -selection clipboard"
bind -T copy-mode-vi Enter send -X copy-pipe-and-cancel "xclip -in -selection clipboard"

# Faster escape handling (helps with vim/neovim + terminal latency).
set -sg escape-time 10

# Renumber windows after closing one.
set -g renumber-windows on

# Reload config: PREFIX + R.
bind R source-file ~/.tmux.conf \; display "reloaded ~/.tmux.conf"

# Use PREFIX + b for switching to last window.
bind b last-window

# Index panes and windows starting from 1.
setw -g pane-base-index 1
set -g base-index 1

# Split horizontally/vertically, keeping current paneâ€™s working directory.
# (Overrides default split keys: PREFIX + | and PREFIX + -)
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"

# Vim-like pane movement (PREFIX + h/j/k/l).
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Quick cycle panes (PREFIX + Tab).
bind Tab select-pane -t :.+

# Resize panes with repeat (hold key): PREFIX + H/J/K/L.
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# Status bar configuration.
set -g status-interval 2
set -g status-position bottom
set -g status-left-length 50
set -g status-right-length 120
set -g status-left  " #S #[fg=colour244]|#[default] "
set -g status-right "#[fg=colour244]%Y-%m-%d %H:%M#[default] #[fg=colour244]|#[default] #{pane_current_path}"

# Status bar style.
set -g status-style bg=black,fg=#FF7A00
set -g window-status-style fg=#FF7A00,bg=black
set -g window-status-current-style fg=black,bg=#FF7A00,bold
set -g pane-border-style fg=#552200
set -g pane-active-border-style fg=#FF7A00
set -g message-style fg=black,bg=#FF7A00
set -g message-command-style fg=black,bg=#FF7A00
set -g mode-style fg=black,bg=#FF7A00
